var OverlayPage;(function(){function i(){_d.body.style.top="-"+_w.pageYOffset+"px";Lib.CssClass.add(_d.body,"disable_scroll")}function r(){var n=-parseInt(_d.body.style.top);Lib.CssClass.remove(_d.body,"disable_scroll");_d.body.style.top="";_w.scrollTo(0,n)}function u(i){if(!n[i.id]){var r=new t(i);n[i.id]=r;WireUp.onUpdate(i,"trigger",function(n,t,i,u){u?r.show():r.hide()});sj_evt.fire("overlay_page_init_done")}}var t=function(){function n(n){var t=this,i,r;this.node=n;this.backgroundNode=this.node.children[0];this.containerNode=this.node.children[1];this.contentNode=this.node.getElementsByClassName("b_overlay_page_content_scroll")[0];this.isFullScreen=Lib.CssClass.contains(this.node,"b_fullscreen");i=Lib.CssClass.contains(this.node,"b_nodismiss");this.appns=this.node.getAttribute("data-appns");this.kvalue=this.node.getAttribute("data-k");this.escapeCloseHandler=function(n){(n.key==="Escape"||n.key==="Esc")&&t.hide()};this.isFullScreen&&(r=this.containerNode.firstChild.lastChild,sj_be(r,"click",function(){t.hide()}));i||(this.softDismiss(),sj_be(this.containerNode,"click",function(){t.hide()}));this.captureAllTocuhEvents()}return n.prototype.show=function(){(sj_be(_w,"keyup",this.escapeCloseHandler),Lib.CssClass.contains(this.node,"b_hide"))&&(i(),Lib.CssClass.remove(this.node,"b_hide"),Log.Log("Show","OverlayPage",this.node.id,!1,"AppNS",this.appns,"K",this.kvalue,"Category","CommonControls"))},n.prototype.captureAllTocuhEvents=function(){var n=this;["touchstart","touchmove","touchend","touchout"].forEach(function(t){sj_be(n.containerNode,t,function(n){sj_sp(n)})})},n.prototype.softDismiss=function(){var n,t;if(this.contentNode&&this.contentNode.children!=null&&this.contentNode)for(n=0;n<this.contentNode.children.length;n++)t=this.contentNode.children[n],sj_be(t,"click",function(n){n.stopPropagation()})},n.prototype.hide=function(){(sj_ue(_w,"keyup",this.escapeCloseHandler),Lib.CssClass.contains(this.node,"b_hide"))||(Lib.CssClass.add(this.node,"b_hide"),r(),Log.Log("Hide","OverlayPage",this.node.id,!1,"AppNS",this.appns,"K",this.kvalue,"Category","CommonControls"))},n}(),n={};WireUp.init("overlay_page_init",function(n){u(n)})})(OverlayPage||(OverlayPage={}))